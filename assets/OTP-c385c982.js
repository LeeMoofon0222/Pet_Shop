import{p as U,a2 as K,g as q,j as M,O as z,d as b,r as F,e as J,w as T,a3 as Q,c as n,L as W,m as B,B as N,y as E,a as X,n as Y,b as Z,s as G,o as ee,a4 as te,a5 as ae,_ as ne,a0 as le,C as oe,D as se,E as A,G as R,H as $,F as ie}from"./index-b47d2a03.js";import{V as j}from"./VContainer-5214e4d2.js";import{m as re,a as ue,u as ce,V as de}from"./VField-09e39eba.js";import{a as L,m as me,u as ve}from"./VOverlay-07b7416f.js";import{d as fe,V as be}from"./VBtn-92a30428.js";import{q as ye,r as pe,u as H,s as ge,t as ke,d as he,p as Ve,v as we,w as Pe,x as xe,h as Ce,y as Se,k as _e,V as Fe}from"./index-59a79b5b.js";import{f as Te}from"./forwardRefs-e658ad70.js";/* empty css              */import"./index-bc0a3d9e.js";import"./lazy-2074a816.js";const Be=U({autofocus:Boolean,divider:String,focusAll:Boolean,label:{type:String,default:"$vuetify.input.otp"},length:{type:[Number,String],default:6},modelValue:{type:[Number,String],default:void 0},placeholder:String,type:{type:String,default:"number"},...ye(),...re(),...K(ue({variant:"outlined"}),["baseColor","bgColor","class","color","disabled","error","loading","rounded","style","theme","variant"])},"VOtpInput"),De=q()({name:"VOtpInput",props:Be(),emits:{finish:e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,o){let{attrs:l,emit:s,slots:u}=o;const{dimensionStyles:y}=pe(e),{isFocused:v,focus:P,blur:k}=ce(e),i=M(e,"modelValue","",t=>String(t).split(""),t=>t.join("")),{t:x}=z(),C=b(()=>Number(e.length)),h=b(()=>Array(C.value).fill(0)),r=F(-1),V=F(),f=F([]),p=b(()=>f.value[r.value]);function w(){if(e.type==="number"&&/[^0-9]/g.test(p.value.value)){p.value.value="";return}const t=i.value.slice(),a=p.value.value;t[r.value]=a;let c=null;r.value>i.value.length?c=i.value.length+1:r.value+1!==C.value&&(c="next"),i.value=t,c&&N(V.value,c)}function D(t){const a=i.value.slice(),c=r.value;let d=null;["ArrowLeft","ArrowRight","Backspace","Delete"].includes(t.key)&&(t.preventDefault(),t.key==="ArrowLeft"?d="prev":t.key==="ArrowRight"?d="next":["Backspace","Delete"].includes(t.key)&&(a[r.value]="",i.value=a,r.value>0&&t.key==="Backspace"?d="prev":requestAnimationFrame(()=>{var m;(m=f.value[c])==null||m.select()})),requestAnimationFrame(()=>{d!=null&&N(V.value,d)}))}function I(t,a){var c,d;a.preventDefault(),a.stopPropagation(),i.value=(((c=a==null?void 0:a.clipboardData)==null?void 0:c.getData("Text"))??"").split(""),(d=f.value)==null||d[t].blur()}function O(){i.value=[]}function g(t,a){P(),r.value=a}function S(){k(),r.value=-1}return J({VField:{color:b(()=>e.color),bgColor:b(()=>e.color),baseColor:b(()=>e.baseColor),disabled:b(()=>e.disabled),error:b(()=>e.error),variant:b(()=>e.variant)}},{scoped:!0}),T(i,t=>{t.length===C.value&&s("finish",t.join(""))},{deep:!0}),T(r,t=>{t<0||E(()=>{var a;(a=f.value[t])==null||a.select()})}),H(()=>{var c;const[t,a]=Q(l);return n("div",B({class:["v-otp-input",{"v-otp-input--divided":!!e.divider},e.class],style:[e.style]},t),[n("div",{ref:V,class:"v-otp-input__content",style:[y.value]},[h.value.map((d,m)=>n(W,null,[e.divider&&m!==0&&n("span",{class:"v-otp-input__divider"},[e.divider]),n(de,{focused:v.value&&e.focusAll||r.value===m,key:m},{...u,loader:void 0,default:()=>n("input",{ref:_=>f.value[m]=_,"aria-label":x(e.label,m+1),autofocus:m===0&&e.autofocus,autocomplete:"one-time-code",class:["v-otp-input__field"],disabled:e.disabled,inputmode:e.type==="number"?"numeric":"text",min:e.type==="number"?0:void 0,maxlength:"1",placeholder:e.placeholder,type:e.type==="number"?"text":e.type,value:i.value[m],onInput:w,onFocus:_=>g(_,m),onBlur:S,onKeydown:D,onPaste:_=>I(m,_)},null)})])),n("input",B({class:"v-otp-input-input",type:"hidden"},a,{value:i.value.join("")}),null),n(L,{contained:!0,"content-class":"v-otp-input__loader","model-value":!!e.loading,persistent:!0},{default:()=>{var d;return[((d=u.loader)==null?void 0:d.call(u))??n(fe,{color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0,size:"24",width:"2"},null)]}}),(c=u.default)==null?void 0:c.call(u)])])}),{blur:()=>{var t;(t=f.value)==null||t.some(a=>a.blur())},focus:()=>{var t;(t=f.value)==null||t[0].focus()},reset:O,isFocused:v}}});function Ie(e){const o=G(e);let l=-1;function s(){clearInterval(l)}function u(){s(),E(()=>o.value=e)}function y(v){const P=v?getComputedStyle(v):{transitionDuration:.2},k=parseFloat(P.transitionDuration)*1e3||200;if(s(),o.value<=0)return;const i=performance.now();l=window.setInterval(()=>{const x=performance.now()-i+k;o.value=Math.max(e-x,0),o.value<=0&&s()},k)}return ae(s),{clear:s,time:o,start:y,reset:u}}const Oe=U({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,...ge({location:"bottom"}),...ke(),...he(),...Ve(),...X(),...Y(me({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),Ae=q()({name:"VSnackbar",props:Oe(),emits:{"update:modelValue":e=>!0},setup(e,o){let{slots:l}=o;const s=M(e,"modelValue"),{locationStyles:u}=we(e),{positionClasses:y}=Pe(e),{scopeId:v}=ve(),{themeClasses:P}=Z(e),{colorClasses:k,colorStyles:i,variantClasses:x}=xe(e),{roundedClasses:C}=Ce(e),h=Ie(Number(e.timeout)),r=F(),V=F(),f=G(!1);T(s,w),T(()=>e.timeout,w),ee(()=>{s.value&&w()});let p=-1;function w(){h.reset(),window.clearTimeout(p);const g=Number(e.timeout);if(!s.value||g===-1)return;const S=te(V.value);h.start(S),p=window.setTimeout(()=>{s.value=!1},g)}function D(){h.reset(),window.clearTimeout(p)}function I(){f.value=!0,D()}function O(){f.value=!1,w()}return H(()=>{const g=L.filterProps(e),S=!!(l.default||l.text||e.text);return n(L,B({ref:r,class:["v-snackbar",{"v-snackbar--active":s.value,"v-snackbar--multi-line":e.multiLine&&!e.vertical,"v-snackbar--timer":!!e.timer,"v-snackbar--vertical":e.vertical},y.value,e.class],style:e.style},g,{modelValue:s.value,"onUpdate:modelValue":t=>s.value=t,contentProps:B({class:["v-snackbar__wrapper",P.value,k.value,C.value,x.value],style:[u.value,i.value],onPointerenter:I,onPointerleave:O},g.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0},v),{default:()=>{var t,a;return[Se(!1,"v-snackbar"),e.timer&&n("div",{key:"timer",class:"v-snackbar__timer"},[n(_e,{ref:V,active:!f.value,color:typeof e.timer=="string"?e.timer:"info",max:e.timeout,"model-value":h.time.value},null)]),S&&n("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[((t=l.text)==null?void 0:t.call(l))??e.text,(a=l.default)==null?void 0:a.call(l)]),l.actions&&n(Fe,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[n("div",{class:"v-snackbar__actions"},[l.actions()])]})]},activator:l.activator})}),Te({},r)}}),Re={data:()=>({timer:null,time:60,loading:!1,snackbar:!1,snackbarColor:"default",otp:"",text:"",expectedOtp:"123456",username:"DogCom"}),mounted(){this.timer=setInterval(this.countdown,1e3)},methods:{async onFinish(e){this.loading=!0,setTimeout(()=>{this.loading=!1,this.snackbarColor=e===this.expectedOtp?"success":"warning",this.text=`Processed OTP with "${e}" (${this.snackbarColor})`,this.snackbar=!0},1e3),e===this.expectedOtp&&(await new Promise(o=>setTimeout(o,3e3)),le.push({name:"ResetPassword",params:{username:this.username}}))},countdown(){this.time--,this.time==0&&clearInterval(this.timer)},resendOTP(){}},beforeUnmount(){clearInterval(this.timer)}},Le=R("span",{class:"text-h4"},[R("strong",null,"請輸入驗證碼")],-1);function Ne(e,o,l,s,u,y){return oe(),se(j,{class:"d-flex flex-column fill-height justify-center"},{default:A(()=>[Le,n(De,{modelValue:e.otp,"onUpdate:modelValue":o[0]||(o[0]=v=>e.otp=v),type:"password",loading:e.loading,onFinish:y.onFinish},null,8,["modelValue","loading","onFinish"]),n(j,{class:"d-flex flex-row justify-center align-center"},{default:A(()=>[R("div",null,"驗證碼將在"+$(e.time)+"秒后失效",1),n(be,{class:"mx-5 bg-success",text:"重新發送",onClick:y.resendOTP},null,8,["onClick"])]),_:1}),n(Ae,{modelValue:e.snackbar,"onUpdate:modelValue":o[1]||(o[1]=v=>e.snackbar=v),color:e.snackbarColor,timeout:2e3},{default:A(()=>[ie($(e.text),1)]),_:1},8,["modelValue","color"])]),_:1})}const Je=ne(Re,[["render",Ne]]);export{Je as default};
